{{ config(
    materialized='external',
    external = {
         "location": "gs://compact-arc-447521-f9-data-lake/raw/latest/f1db-races.csv",
         "format": "csv",
         "skip_leading_rows": 1,
         "schema": "
            id INT64,
            year INT64,
            round INT64,
            date DATE,
            time STRING,
            grandPrixId STRING,
            officialName STRING,
            qualifyingFormat STRING,
            sprintQualifyingFormat STRING,
            circuitId STRING,
            circuitType STRING,
            direction STRING,
            courseLength FLOAT64,
            turns INT64,
            laps INT64,
            distance FLOAT64,
            scheduledLaps INT64,
            scheduledDistance FLOAT64,
            driversChampionshipDecider BOOL,
            constructorsChampionshipDecider BOOL,
            preQualifyingDate DATE,
            preQualifyingTime STRING,
            freePractice1Date DATE,
            freePractice1Time STRING,
            freePractice2Date DATE,
            freePractice2Time STRING,
            freePractice3Date DATE,
            freePractice3Time STRING,
            freePractice4Date DATE,
            freePractice4Time STRING,
            qualifying1Date DATE,
            qualifying1Time STRING,
            qualifying2Date DATE,
            qualifying2Time STRING,
            qualifyingDate DATE,
            qualifyingTime STRING,
            sprintQualifyingDate DATE,
            sprintQualifyingTime STRING,
            sprintRaceDate DATE,
            sprintRaceTime STRING,
            warmingUpDate DATE,
            warmingUpTime STRING
         ",
         "partition_by": "date",
         "cluster_by": ["id", "circuitId"]

    }
) }}

select * from external